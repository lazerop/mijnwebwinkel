<!DOCTYPE html>

<html ng-app="webcart">
<head>
    <title>Webcart</title>

    <!--<link rel="stylesheet" type="text/css" href="style/style.css">-->

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="style.css" />


    <!--Angular-->
    <!--<script type="text/javascript" src="angular.js"></script>-->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="app.js"></script>

    <!--Controllers-->
    <script type="text/javascript" src="LoginController.js"></script>
    <script type="text/javascript" src="ProductsController.js"></script>
    <script type="text/javascript" src="ContentController.js"></script>
    <script type="text/javascript" src="CartController.js"></script>

</head>
    <body>

    <div id="content" ng-controller="ContentCtrl">
        <div id="top_header">
            Products in cart: {{ cart_size }}
        </div>

        <div id="messages">
            <div class="message" ng-repeat="message in messages">{{ message }}</div>
        </div>

        <div id="products" ng-controller="ProductsCtrl" ng-if="!cartOpen">
            <div id="all_product" ng-show="!productSelected">
                <div class="header">PRODUCTS</div>
                <div ng-repeat="product in products" class="product-label" ng-click="showProductDetails(product.id)">
                    <div>{{ product.name }}</div>
                </div>
            </div>

            <div id="productDetail" ng-show="productSelected">
                <div>Naam: {{ selectedProduct.name }}</div>
                <div>Prijs (zonder BTW): {{ selectedProduct.price_before_tax }}</div>
                <div>BTW: {{ selectedProduct.tax_percentage }} %</div>
                <div ng-click="orderProduct()">ADD TO CART</div>

                <div>
                    <image ng-src="{{selectedProduct.photo_url}}"></image>
                </div>

                <div class="button" ng-click="backToAllProducts()">BACK to all products</div>
            </div>
        </div>

        <div id="cart" ng-if="cartOpen == true" ng-controller="CartCtrl">
            <div class="header">CART</div>

            Total price: {{ order_grand_total | currency:'€' }}

            <table>
                <th></th><th>Name</th><th>Price before tax</th><th>Tax</th><th>Total price</th>

                <tr class="orderRow" ng-repeat="order in orders">
                    <td><image ng-src="{{order.photo_url}}"></image></td>
                    <td>{{order.name}}</td>
                    <td>{{order.price_before_tax | currency:'€'}}</td>
                    <td>{{order.tax_percentage}} %</td>
                    <td class="total_price">{{order.total_price | currency:'€' }}</td>
                </tr>

            </table>
        </div>

        <div class="button" ng-if="cartOpen == true" ng-click="closeCart()">CLOSE cart</div>
        <div class="button" ng-if="cartOpen == false" ng-click="openCart()">OPEN cart</div>

    </div>

     <!--login overlay-->
    <div id="login-overlay" ng-show="!sessionIsValid()" ng-controller="LoginCtrl">
        <div id="login">
            <form name="loginForm" ng-submit="login();">
                {{ error }}
                Username: <input type="text" ng-model="session.username" required><br>
                Password: <input type="password" ng-model="session.password" required><br>
                <button type="submit"><icon>save</icon> Login</button>
            </form>
        </div>
    </div>

    </body>
</html>

